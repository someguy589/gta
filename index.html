<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Highway Driving Simulator</title>
<style>
  body { margin: 0; overflow: hidden; background: #87CEEB; }
  canvas { display: block; background: #4CAF50; }
  #hud {
    position: absolute;
    top: 10px;
    left: 10px;
    font-family: Arial;
    background: rgba(255,255,255,0.7);
    padding: 10px;
    border-radius: 5px;
  }
</style>
</head>
<body>
<div id="hud">
  Gas: <span id="gas">100</span>%<br>
  Status: <span id="status">Free</span>
</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let car = { x: canvas.width/2, y: canvas.height - 100, angle: 0, speed: 0, gas: 100 };
let status = "Free";

// Create lanes
const lanes = [canvas.width/2 - 100, canvas.width/2, canvas.width/2 + 100];

// Civilians
let civilians = [];
for(let i=0; i<6; i++) {
  civilians.push({
    x: lanes[Math.floor(Math.random()*lanes.length)],
    y: Math.random()*-canvas.height,
    speed: 2 + Math.random()*2
  });
}

// Gas stations
let gasStations = [
  {x: lanes[0], y: -200},
  {x: lanes[2], y: -800}
];

const keys = {};
document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

function update() {
  // Controls
  if(keys['w'] && car.gas > 0) car.speed += 0.2;
  if(keys['s']) car.speed -= 0.2;
  if(keys['a']) car.x -= 5;
  if(keys['d']) car.x += 5;

  car.x = Math.max(50, Math.min(canvas.width-50, car.x)); // stay on road
  car.y -= car.speed; // move forward
  car.speed *= 0.95;
  if(car.speed > 0) car.gas -= 0.05;

  // Move civilians down the screen
  for(let civ of civilians) {
    civ.y += civ.speed;
    if(civ.y > canvas.height + 50) {
      civ.y = -50;
      civ.x = lanes[Math.floor(Math.random()*lanes.length)];
      civ.speed = 2 + Math.random()*2;
    }
    // Collision
    const dx = car.x - civ.x;
    const dy = car.y - civ.y;
    if(Math.sqrt(dx*dx + dy*dy) < 30 && status === "Free") {
      status = "Jail";
      car.speed = 0;
      setTimeout(() => { status = "Free"; }, 5000);
    }
  }

  // Gas stations
  for(let gas of gasStations) {
    gas.y += 2; // scroll down like road
    if(gas.y > canvas.height + 50) gas.y = -800; // respawn
    const dx = car.x - gas.x;
    const dy = car.y - gas.y;
    if(Math.sqrt(dx*dx + dy*dy) < 40) car.gas = 100;
  }

  // Update HUD
  document.getElementById('gas').innerText = Math.floor(car.gas);
  document.getElementById('status').innerText = status;
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Draw road lanes
  ctx.fillStyle = '#555';
  ctx.fillRect(canvas.width/2 - 150, 0, 300, canvas.height);
  ctx.strokeStyle = 'white';
  ctx.lineWidth = 2;
  for(let i=1; i<3; i++) {
    ctx.setLineDash([20, 20]);
    ctx.beginPath();
    ctx.moveTo(lanes[i]-50, 0);
    ctx.lineTo(lanes[i]-50, canvas.height);
    ctx.stroke();
  }
  ctx.setLineDash([]);

  // Draw gas stations
  ctx.fillStyle = 'yellow';
  for(let gas of gasStations) {
    ctx.fillRect(gas.x-15, gas.y-15, 30, 30);
  }

  // Draw civilians
  ctx.fillStyle = 'red';
  for(let civ of civilians) {
    ctx.fillRect(civ.x-20, civ.y-10, 40, 20);
  }

  // Draw player car
  ctx.fillStyle = 'blue';
  ctx.fillRect(car.x-20, car.y-10, 40, 20);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
